---
title: 실용주의 프로그래머 - 6. Concurrency
date: 2022-05-25 01:05:04
category: book
thumbnail: { thumbnailSrc }
draft: false
---

📘책 리뷰 : **Ch. 6 동시성**<br>

## 🔍TL;DR (3줄 요약)

1. {스레드 같은 동시성은 규모가 클수록 필수적이다.}
2. {공유 상태를 해결할 세마포어를 도입하자.}
3. {}

## 🤔뭐가 기억에 남음? 헷갈린 건?

&nbsp;시스템 규모가 커지면 동시성은 필수적이다. 그리고 동시성은 보통 스레드나 프로세스를 이용해 구현하게 된다.(사실 컴퓨팅 파워가 작아도 스레드는 필요하다.)<br>
아무튼 또 real world는 비동기적이다. 왜냐면 사용자와 상호작용하고, 데이터를 얻고, 외부 서비스를 호출하는 일을 동시에 해야하니까!<br>
이런걸 순차적으로 하나하나 한다는건 너무 느리며 사용자 경험도 떨어질 것이다.  

&nbsp;우리 모두는 프로그래밍을 순차적 시스템으로 배웠다. 그래서 어렵기도 하지만 더 골칫거리는 바로 '공유 상태(shared state)'이다.<br>
공유 상태는 틀린 것이다. 마치 레스토랑 진열장에 하나 남은 애플 파이처럼 결정에 필요한 메모리 시효가 지나버리면 난리가 나지 않는가l.  

그래서 나온게 세마포어(semaphore)이다. 식당에서 화장실 갈 때 꼭 귀여운 인형에 열쇠를 달아 놓는 것 처럼. 그 인형이 바로 세마포어다.<br>
코드에서 세마포어를 획득하는걸 요즘은 lock/unlock 또는 claim/release 라고 칭한다고 한다.<br>
아무튼 트랜잭션을 통해서 리소스를 관리하는 것이 좋아보인다. 아 마지막으로 공유 리소스에 독점 접근하는 말인 'mutual exclusion' 즉, mutex가 라이브러리로 제공되곤 한다.  
이런 공유 상태 없는 동시성을 위해 액터 모델을 사용하기도 한다.

&nbsp;그리고 동시성 찾기 일환으로 '활동 다이어그램' 으로 작업할 수 있는 부분들을 보여주지만, 설계를 통해 정말 가능한지 여부를 알 수 있다.

그리고 헷갈릴 수 있는데<br>
동시성 : 소프트웨어 동작 방식<br>
병렬성 : 하드웨어 단 이라는 것이다.  

&nbsp;마지막으로 칠판이다. 형사가 사건 해결을 위해 칠판을 쓴다고 가정 했을 때 특징이 있다.
- 형사는 다른 형사의 존재가 필요없다. 그저 새로운 정보를 얻고 쓰는 것이다.
- 형사는 각각 전문 분야는 다르지만, 사건을 해결하고 싶은 맘은 같다.
- 수사 팀은 수시로 바뀌며 임무 시간도 다르다.
- 칠판에는 사진, 증언 등등 무엇이든 올릴 수 있다.

각 형사는 독립된 프로세스나 액터로써 자유방임주의 같은 동시성을 나타낸다.

## 읽은 소감

&nbsp;동시성 chapter를 읽으며 내가 앞으로 쓸 JS가 그저 싱글 스레드 언어 인 줄 알았는데 Web API, Callback Queue, Event Loop 등등 덕분에 멀티 스레드와 같은 동시성을 지니고 있다고 한다.<br>
앞으로 기회가 되면 이것들의 특징이 무엇인지 한 번 알아봐야겠다.

<br><br> #노마드코더 #북클럽 #노개북<br>
최종 작성일 : 2022-05-25